/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2014, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
'use strict';var m;function s(a,b){return a.b===b.b&&a.a===b.a}function t(a,b){return a.b<b.b||a.b===b.b&&a.a<=b.a}function u(a,b,c){var d=b.b-a.b,e=c.b-b.b;return 0<d+e?d<e?b.a-a.a+d/(d+e)*(a.a-c.a):b.a-c.a+e/(d+e)*(c.a-a.a):0}function w(a,b,c){var d=b.b-a.b,e=c.b-b.b;return 0<d+e?(b.a-c.a)*d+(b.a-a.a)*e:0}function x(a,b){return a.a<b.a||a.a===b.a&&a.b<=b.b}function aa(a,b,c){var d=b.a-a.a,e=c.a-b.a;return 0<d+e?d<e?b.b-a.b+d/(d+e)*(a.b-c.b):b.b-c.b+e/(d+e)*(c.b-a.b):0}
function ba(a,b,c){var d=b.a-a.a,e=c.a-b.a;return 0<d+e?(b.b-c.b)*d+(b.b-a.b)*e:0}function ca(a){return t(z(a),a.a)}function da(a){return t(a.a,z(a))}function A(a,b,c,d){a=0>a?0:a;c=0>c?0:c;return a<=c?0===c?(b+d)/2:b+a/(a+c)*(d-b):d+c/(a+c)*(b-d)};function ea(a){var b=B(a.b);C(b,a.c);C(b.b,a.c);D(b,a.a);return b}function E(a,b){var c=!1,d=!1;a!==b&&(b.a!==a.a&&(d=!0,F(b.a,a.a)),b.c!==a.c&&(c=!0,G(b.c,a.c)),H(b,a),d||(C(b,a.a),a.a.d=a),c||(D(b,a.c),a.c.b=a))}function I(a){var b=a.b,c=!1;a.c!==J(a)&&(c=!0,G(a.c,J(a)));a.d===a?F(a.a,null):(J(a).b=K(a),a.a.d=a.d,H(a,K(a)),c||D(a,a.c));b.d===b?(F(b.a,null),G(b.c,null)):(a.c.b=K(b),b.a.d=b.d,H(b,K(b)));fa(a)}
function L(a){var b=B(a),c=b.b;H(b,a.e);b.a=z(a);C(c,b.a);b.c=c.c=a.c;b=b.b;H(a.b,K(a.b));H(a.b,b);a.b.a=b.a;z(b).d=b.b;b.b.c=J(a);b.g=a.g;b.b.g=a.b.g;return b}function M(a,b){var c=!1,d=B(a),e=d.b;b.c!==a.c&&(c=!0,G(b.c,a.c));H(d,a.e);H(e,b);d.a=z(a);e.a=b.a;d.c=e.c=a.c;a.c.b=e;c||D(d,a.c);return d}function B(a){var b=new N,c=new N,d=a.b.i;c.i=d;d.b.i=b;b.i=a;a.b.i=c;b.b=c;b.d=b;b.e=c;c.b=b;c.d=c;return c.e=b}function H(a,b){var c=a.d,d=b.d;c.b.e=b;d.b.e=a;a.d=d;b.d=c}
function C(a,b){var c=b.g,d=new ga(b,c);c.e=d;b.g=d;c=d.d=a;do c.a=d,c=c.d;while(c!==a)}function D(a,b){var c=b.g,d=new ha(b,c);c.a=d;b.g=d;d.b=a;d.c=b.c;c=a;do c.c=d,c=c.e;while(c!==a)}function fa(a){var b=a.i;a=a.b.i;b.b.i=a;a.b.i=b}function F(a,b){var c=a.d,d=c;do d.a=b,d=d.d;while(d!==c);c=a.g;d=a.e;d.g=c;c.e=d}function G(a,b){var c=a.b,d=c;do d.c=b,d=d.e;while(d!==c);c=a.g;d=a.a;d.g=c;c.a=d};function ia(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function ja(a){var b=0;Math.abs(a[1])>Math.abs(a[0])&&(b=1);Math.abs(a[2])>Math.abs(a[b])&&(b=2);return b};function ka(a){if(3>a.c)return!0;var b=[0,0,0];b[0]=a.i[0];b[1]=a.i[1];b[2]=a.i[2];0===b[0]&&0===b[1]&&0===b[2]&&la(a,b,!1);var c=la(a,b,!0);if(2===c)return!1;if(0===c)return!0;switch(a.B){case 100132:if(0>c)return!0;break;case 100133:if(0<c)return!0;break;case 100134:return!0}O(a,a.n?2:3<a.c?6:4);b=0+a.c;P(a,a.g[0].a);if(0<c)for(c=1;c<b;++c)P(a,a.g[c].a);else for(c=b-1;0<c;--c)P(a,a.g[c].a);Q(a);return!0}function R(a){return!a.c||a.d}function ma(a){for(;null!==a;)a.d=!1,a=a.e}
function na(a){var b=new oa(0,null,pa),c=null,d;for(d=a;!R(d.c);d=d.d)d.c.e=c,c=d.c,d.c.d=!0,++b.a;for(d=a;!R(J(d));d=K(d))J(d).e=c,c=J(d),J(d).d=!0,++b.a;b.b=d;ma(c);return b}
function qa(a){var b=new oa(0,null,ra),c=0,d=0,e=null,f,g;for(f=a;!R(f.c);++d,f=f.d){f.c.e=e;e=f.c;f.c.d=!0;++d;f=f.e.b;if(R(f.c))break;f.c.e=e;e=f.c;f.c.d=!0}g=f;for(f=a;!R(J(f));++c,f=f.b.d.b){J(f).e=e;e=J(f);J(f).d=!0;++c;f=K(f);if(R(J(f)))break;J(f).e=e;e=J(f);J(f).d=!0}a=f;b.a=d+c;0===(d&1)?b.b=g.b:0===(c&1)?b.b=a:(--b.a,b.b=a.d);ma(e);return b}function pa(a,b,c){O(a,6);P(a,b.a.c);for(P(a,z(b).c);!R(b.c);)b.c.d=!0,--c,b=b.d,P(a,z(b).c);Q(a)}
function ra(a,b,c){O(a,5);P(a,b.a.c);for(P(a,z(b).c);!R(b.c);){b.c.d=!0;--c;b=b.e.b;P(a,b.a.c);if(R(b.c))break;b.c.d=!0;--c;b=b.d;P(a,z(b).c)}Q(a)}function sa(a,b){b.c.e=a.m;a.m=b.c;b.c.d=!0}
function la(a,b,c){c||(b[0]=b[1]=b[2]=0);for(var d=0+a.c,e=1,f=a.g[0],g=a.g[e],n=g.f[0]-f.f[0],l=g.f[1]-f.f[1],k=g.f[2]-f.f[2],h=0;++e<d;){var g=a.g[e],p=n,r=l,v=k,n=g.f[0]-f.f[0],l=g.f[1]-f.f[1],k=g.f[2]-f.f[2],g=[0,0,0];g[0]=r*k-v*l;g[1]=v*n-p*k;g[2]=p*l-r*n;p=g[0]*b[0]+g[1]*b[1]+g[2]*b[2];if(!c)0<=p?(b[0]+=g[0],b[1]+=g[1],b[2]+=g[2]):(b[0]-=g[0],b[1]-=g[1],b[2]-=g[2]);else if(0!==p)if(0<p){if(0>h)return 2;h=1}else{if(0<h)return 2;h=-1}}return h};var S=4*1E150;function ta(a,b){a.g+=b.g;a.b.g+=b.b.g}function ua(a,b,c){a=a.a;b=b.h;c=c.h;if(z(b)===a)return z(c)===a?t(b.a,c.a)?0>=w(z(c),b.a,c.a):0<=w(z(b),c.a,b.a):0>=w(z(c),a,c.a);if(z(c)===a)return 0<=w(z(b),a,b.a);b=u(z(b),a,b.a);a=u(z(c),a,c.a);return b>=a}function T(a){a.h.j=null;var b=a.d;b.a.c=b.c;b.c.a=b.a;a.d=null}function va(a,b){I(a.h);a.b=!1;a.h=b;b.j=a}function wa(a){var b=a.h.a;do a=U(a);while(a.h.a===b);a.b&&(b=M(V(a).h.b,a.h.e),va(a,b),a=U(a));return a}
function xa(a,b,c){var d=new ya;d.h=c;d.d=za(a.k,b.d,d);return c.j=d}function Aa(a,b){switch(a.B){case 100130:return 0!==(b&1);case 100131:return 0!==b;case 100132:return 0<b;case 100133:return 0>b;case 100134:return 2<=b||-2>=b}return!1}function Ba(a){var b=a.h,c=b.c;c.c=a.c;c.b=b;T(a)}function W(a,b){for(var c=a,d=a.h;c!==b;){c.b=!1;var e=V(c),f=e.h;if(f.a!==d.a){if(!e.b){Ba(c);break}f=M(d.d.b,f.b);va(e,f)}d.d!==f&&(E(K(f),f),E(d,f));Ba(c);d=e.h;c=e}return d}
function X(a,b,c,d,e,f){var g=!0;do xa(a,b,c.b),c=c.d;while(c!==d);for(null===e&&(e=V(b).h.b.d);;){d=V(b);c=d.h.b;if(c.a!==e.a)break;c.d!==e&&(E(K(c),c),E(K(e),c));d.e=b.e-c.g;d.c=Aa(a,d.e);b.a=!0;!g&&Ca(a,b)&&(ta(c,e),T(b),I(e));g=!1;b=d;e=c}b.a=!0;f&&Da(a,b)}function Ea(a,b,c,d,e){var f=[b.f[0],b.f[1],b.f[2]];b.c=null;var g;a.C?g=a.C(f,c,d,a.d):a.D&&(g=a.D(f,c,d));void 0===g&&(g=null);b.c=g;null===b.c&&(e?a.A||(Y(a,100156),a.A=!0):b.c=c[0])}
function Fa(a,b,c){var d=[null,null,null,null];d[0]=b.a.c;d[1]=c.a.c;Ea(a,b.a,d,[.5,.5,0,0],!1);E(b,c)}function Ga(a,b,c,d,e){var f=Math.abs(b.b-a.b)+Math.abs(b.a-a.a),g=Math.abs(c.b-a.b)+Math.abs(c.a-a.a),n=e+1;d[e]=.5*g/(f+g);d[n]=.5*f/(f+g);a.f[0]+=d[e]*b.f[0]+d[n]*c.f[0];a.f[1]+=d[e]*b.f[1]+d[n]*c.f[1];a.f[2]+=d[e]*b.f[2]+d[n]*c.f[2]}
function Ca(a,b){var c=V(b),d=b.h,e=c.h;if(t(d.a,e.a)){if(0<w(z(e),d.a,e.a))return!1;if(!s(d.a,e.a))L(e.b),E(d,K(e)),b.a=c.a=!0;else if(d.a!==e.a){var c=a.j,f=d.a.i;if(0<=f){var c=c.b,g=c.c,n=c.a,l=n[f].b;g[l].a=g[c.b].a;n[g[l].a].b=l;l<=--c.b&&(1>=l||c.g(n[g[l>>1].a].a,n[g[l].a].a)?Ha(c,l):Ia(c,l));n[f].a=null;n[f].b=c.d;c.d=f}else for(c.c[-(f+1)]=null;0<c.a&&null===c.c[c.d[c.a-1]];)--c.a;Fa(a,K(e),d)}}else{if(0>w(z(d),e.a,d.a))return!1;U(b).a=b.a=!0;L(d.b);E(K(e),d)}return!0}
function Ja(a,b){var c=V(b),d=b.h,e=c.h,f=d.a,g=e.a,n=z(d),l=z(e),k=new ga;w(n,a.a,f);w(l,a.a,g);if(f===g||Math.min(f.a,n.a)>Math.max(g.a,l.a))return!1;if(t(f,g)){if(0<w(l,f,g))return!1}else if(0>w(n,g,f))return!1;var h=n,p=f,r=l,v=g,q,y;t(h,p)||(q=h,h=p,p=q);t(r,v)||(q=r,r=v,v=q);t(h,r)||(q=h,h=r,r=q,q=p,p=v,v=q);t(r,p)?t(p,v)?(q=u(h,r,p),y=u(r,p,v),0>q+y&&(q=-q,y=-y),k.b=A(q,r.b,y,p.b)):(q=w(h,r,p),y=-w(h,v,p),0>q+y&&(q=-q,y=-y),k.b=A(q,r.b,y,v.b)):k.b=(r.b+p.b)/2;x(h,p)||(q=h,h=p,p=q);x(r,v)||
(q=r,r=v,v=q);x(h,r)||(q=h,h=r,r=q,q=p,p=v,v=q);x(r,p)?x(p,v)?(q=aa(h,r,p),y=aa(r,p,v),0>q+y&&(q=-q,y=-y),k.a=A(q,r.a,y,p.a)):(q=ba(h,r,p),y=-ba(h,v,p),0>q+y&&(q=-q,y=-y),k.a=A(q,r.a,y,v.a)):k.a=(r.a+p.a)/2;t(k,a.a)&&(k.b=a.a.b,k.a=a.a.a);h=t(f,g)?f:g;t(h,k)&&(k.b=h.b,k.a=h.a);if(s(k,f)||s(k,g))return Ca(a,b),!1;if(!s(n,a.a)&&0<=w(n,a.a,k)||!s(l,a.a)&&0>=w(l,a.a,k)){if(l===a.a)return L(d.b),E(e.b,d),b=wa(b),d=V(b).h,W(V(b),c),X(a,b,K(d),d,d,!0),!0;if(n===a.a){L(e.b);E(d.e,K(e));f=c=b;g=z(f.h);do f=
U(f);while(z(f.h)===g);b=f;f=V(b).h.b.d;c.h=K(e);e=W(c,null);X(a,b,e.d,d.b.d,f,!0);return!0}0<=w(n,a.a,k)&&(U(b).a=b.a=!0,L(d.b),d.a.b=a.a.b,d.a.a=a.a.a);0>=w(l,a.a,k)&&(b.a=c.a=!0,L(e.b),e.a.b=a.a.b,e.a.a=a.a.a);return!1}L(d.b);L(e.b);E(K(e),d);d.a.b=k.b;d.a.a=k.a;d.a.i=Ka(a.j,d.a);d=d.a;e=[0,0,0,0];k=[f.c,n.c,g.c,l.c];d.f[0]=d.f[1]=d.f[2]=0;Ga(d,f,n,e,0);Ga(d,g,l,e,2);Ea(a,d,k,e,!0);U(b).a=b.a=c.a=!0;return!1}
function Da(a,b){for(var c=V(b);;){for(;c.a;)b=c,c=V(c);if(!b.a&&(c=b,b=U(b),null===b||!b.a))break;b.a=!1;var d=b.h,e=c.h,f;if(f=z(d)!==z(e))a:{f=b;var g=V(f),n=f.h,l=g.h,k=void 0;if(t(z(n),z(l))){if(0>w(z(n),z(l),n.a)){f=!1;break a}U(f).a=f.a=!0;k=L(n);E(l.b,k);k.c.c=f.c}else{if(0<w(z(l),z(n),l.a)){f=!1;break a}f.a=g.a=!0;k=L(l);E(n.e,l.b);J(k).c=f.c}f=!0}f&&(c.b?(T(c),I(e),c=V(b),e=c.h):b.b&&(T(b),I(d),b=U(c),d=b.h));if(d.a!==e.a)if(z(d)===z(e)||b.b||c.b||z(d)!==a.a&&z(e)!==a.a)Ca(a,b);else if(Ja(a,
b))break;d.a===e.a&&z(d)===z(e)&&(ta(e,d),T(b),I(d),b=U(c))}}
function La(a,b){a.a=b;for(var c=b.d;null===c.j;)if(c=c.d,c===b.d){var c=a,d=b,e=new ya;e.h=d.d.b;var f=c.k,g=f.a;do g=g.a;while(null!==g.b&&!f.c(f.b,e,g.b));var f=g.b,n=V(f),e=f.h,g=n.h;if(0===w(z(e),d,e.a))e=f.h,s(e.a,d)||s(z(e),d)||(L(e.b),f.b&&(I(e.d),f.b=!1),E(d.d,e),La(c,d));else{var l=t(z(g),z(e))?f:n,n=void 0;f.c||l.b?(l===f?n=M(d.d.b,e.e):n=M(g.b.d.b,d.d).b,l.b?va(l,n):(e=c,f=xa(c,f,n),f.e=U(f).e+f.h.g,f.c=Aa(e,f.e)),La(c,d)):X(c,f,d.d,d.d,null,!0)}return}c=wa(c.j);e=V(c);f=e.h;e=W(e,null);
if(e.d===f){var f=e,e=f.d,g=V(c),n=c.h,l=g.h,k=!1;z(n)!==z(l)&&Ja(a,c);s(n.a,a.a)&&(E(K(e),n),c=wa(c),e=V(c).h,W(V(c),g),k=!0);s(l.a,a.a)&&(E(f,K(l)),f=W(g,null),k=!0);k?X(a,c,f.d,e,e,!0):(t(l.a,n.a)?d=K(l):d=n,d=M(f.d.b,d),X(a,c,d,d.d,d.d,!1),d.b.j.b=!0,Da(a,c))}else X(a,c,e.d,f,f,!0)}function Ma(a,b){var c=new ya,d=ea(a.b);d.a.b=S;d.a.a=b;z(d).b=-S;z(d).a=b;a.a=z(d);c.h=d;c.e=0;c.c=!1;c.b=!1;c.g=!0;c.a=!1;d=a.k;d=za(d,d.a,c);c.d=d};function Na(a){this.a=new Oa;this.a.a=this.a;this.a.c=this.a;this.b=a;this.c=ua}function za(a,b,c){do b=b.c;while(null!==b.b&&!a.c(a.b,b.b,c));a=new Oa;a.b=c;a.a=b.a;b.a.c=a;a.c=b;return b.a=a};function Oa(){this.c=this.a=this.b=null};function Pa(){this.f=[0,0,0];this.a=null};function Z(){this.e=0;this.G=this.b=this.p=null;this.i=[0,0,0];this.L=[0,0,0];this.l=[0,0,0];this.H=0;this.B=100130;this.A=!1;this.D=this.a=this.j=this.k=null;this.n=this.o=!1;this.d=this.C=this.F=this.u=this.x=this.s=this.q=this.w=this.v=this.y=this.t=this.r=this.m=null;this.z=!1;this.c=0;this.g=Array(100);for(var a=0;100>a;a++)this.g[a]=new Pa}m=Z.prototype;m.M=function(){$(this,0)};
m.R=function(a,b){switch(a){case 100142:if(0>b||1<b)break;this.H=b;return;case 100140:switch(b){case 100130:case 100131:case 100132:case 100133:case 100134:this.B=b;return}break;case 100141:this.n=!!b;return;default:Y(this,100900);return}Y(this,100901)};m.N=function(a){switch(a){case 100142:return this.H;case 100140:return this.B;case 100141:return this.n;default:Y(this,100900)}return!1};m.Q=function(a,b,c){this.i[0]=a;this.i[1]=b;this.i[2]=c};
m.O=function(a,b){var c=b?b:null;switch(a){case 100100:this.r=c;break;case 100106:this.q=c;break;case 100104:this.t=c;this.o=!!c;break;case 100110:this.s=c;this.o=!!c;break;case 100101:this.y=c;break;case 100107:this.x=c;break;case 100102:this.v=c;break;case 100108:this.u=c;break;case 100103:this.G=c;break;case 100109:this.F=c;break;case 100105:this.D=c;break;case 100111:this.C=c;break;case 100112:this.w=c;break;default:Y(this,100900)}};
m.S=function(a,b){var c=!1,d=[0,0,0];$(this,2);this.z&&(Qa(this),this.p=null);for(var e=0;3>e;++e){var f=a[e];-1E150>f&&(f=-1E150,c=!0);1E150<f&&(f=1E150,c=!0);d[e]=f}c&&Y(this,100155);if(null===this.b){if(100>this.c){c=this.g[this.c];c.a=b;c.f[0]=d[0];c.f[1]=d[1];c.f[2]=d[2];++this.c;return}Qa(this)}Ra(this,d,b)};m.J=function(a){$(this,0);this.e=1;this.c=0;this.z=!1;this.b=null;this.d=a};m.I=function(){$(this,1);this.e=2;this.p=null;0<this.c&&(this.z=!0)};m.K=function(){$(this,2);this.e=1};
m.P=function(){$(this,1);this.e=0;if(null===this.b){if(!this.o&&!this.w&&ka(this)){this.d=null;return}Qa(this)}var a=!1,b=[0,0,0];b[0]=this.i[0];b[1]=this.i[1];b[2]=this.i[2];if(0===b[0]&&0===b[1]&&0===b[2]){var c=[0,0,0],d=[0,0,0],a=[0,0,0],e=[0,0,0],f=[0,0,0];c[0]=c[1]=c[2]=-2*1E150;d[0]=d[1]=d[2]=2*1E150;var g=Array(3),n=Array(3),l,k,h=this.b.c;for(k=h.e;k!==h;k=k.e)for(l=0;3>l;++l){var p=k.f[l];p<d[l]&&(d[l]=p,n[l]=k);p>c[l]&&(c[l]=p,g[l]=k)}l=0;c[1]-d[1]>c[0]-d[0]&&(l=1);c[2]-d[2]>c[l]-d[l]&&
(l=2);if(d[l]>=c[l])b[0]=0,b[1]=0,b[2]=1;else{c=0;k=n[l];g=g[l];a[0]=k.f[0]-g.f[0];a[1]=k.f[1]-g.f[1];a[2]=k.f[2]-g.f[2];for(k=h.e;k!==h;k=k.e)e[0]=k.f[0]-g.f[0],e[1]=k.f[1]-g.f[1],e[2]=k.f[2]-g.f[2],f[0]=a[1]*e[2]-a[2]*e[1],f[1]=a[2]*e[0]-a[0]*e[2],f[2]=a[0]*e[1]-a[1]*e[0],l=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],l>c&&(c=l,b[0]=f[0],b[1]=f[1],b[2]=f[2]);0>=c&&(b[0]=b[1]=b[2]=0,b[ja(a)]=1)}a=!0}e=this.L;f=this.l;h=ja(b);e[h]=0;e[(h+1)%3]=1;e[(h+2)%3]=0;f[h]=0;f[(h+1)%3]=0<b[h]?-0:0;f[(h+2)%3]=0<b[h]?1:-1;
b=this.b.c;for(h=b.e;h!==b;h=h.e)h.b=ia(h.f,e),h.a=ia(h.f,f);if(a){b=0;a=this.b.a;for(e=a.a;e!==a;e=e.a)if(f=e.b,!(0>=f.g)){do b+=(f.a.b-z(f).b)*(f.a.a+z(f).a),f=f.e;while(f!==e.b)}if(0>b){b=this.b.c;for(a=b.e;a!==b;a=a.e)a.a=-a.a;this.l[0]=-this.l[0];this.l[1]=-this.l[1];this.l[2]=-this.l[2]}}this.A=!1;b=this.b.b;for(e=b.i;e!==b;e=a)if(a=e.i,f=e.e,s(e.a,z(e))&&e.e.e!==e&&(Fa(this,f,e),I(e),e=f,f=e.e),f.e===e){if(f!==e){if(f===a||f===a.b)a=a.i;I(f)}if(e===a||e===a.b)a=a.i;I(e)}this.j=b=new Sa;a=this.b.c;
for(e=a.e;e!==a;e=e.e)e.i=Ka(b,e);Ta(b);this.k=new Na(this);Ma(this,-S);for(Ma(this,S);null!==(b=Ua(this.j));){for(;;){a:if(a=this.j,0===a.a)a=Va(a.b);else{e=a.c[a.d[a.a-1]];if(0!==a.b.b&&(f=Va(a.b),a.g(f,e))){a=f;break a}a=e}if(null===a||!s(a,b))break;a=Ua(this.j);Fa(this,b.d,a.d)}La(this,b)}this.a=this.k.a.a.b.h.a;for(b=0;null!==(a=this.k.a.a.b);)a.g||++b,T(a);this.k=null;b=this.j;a=b.b;a.a=null;a.c=null;b.b=null;b.d=null;this.j=b.c=null;b=this.b;for(e=b.a.a;e!==b.a;e=a)a=e.a,e=e.b,e.e.e===e&&(ta(e.d,
e),I(e));if(!this.A){if(this.n)for(b=this.b,e=b.b.i;e!==b.b;e=a)a=e.i,J(e).c!==e.c.c?e.g=e.c.c?1:-1:I(e);else for(b=this.b,e=b.a.a;e!==b.a;e=a)if(a=e.a,e.c){for(e=e.b;t(z(e),e.a);e=e.d.b);for(;t(e.a,z(e));e=e.e);f=e.d.b;for(h=void 0;e.e!==f;)if(t(z(e),f.a)){for(;f.e!==e&&(ca(f.e)||0>=w(f.a,z(f),z(f.e)));)h=M(f.e,f),f=h.b;f=f.d.b}else{for(;f.e!==e&&(da(e.d.b)||0<=w(z(e),e.a,e.d.b.a));)h=M(e,e.d.b),e=h.b;e=e.e}for(;f.e.e!==e;)h=M(f.e,f),f=h.b}if(this.r||this.v||this.y||this.t||this.q||this.u||this.x||
this.s)if(this.n)for(b=this.b,a=b.a.a;a!==b.a;a=a.a){if(a.c){O(this,2);e=a.b;do P(this,e.a.c),e=e.e;while(e!==a.b);Q(this)}}else{b=this.b;this.m=null;for(a=b.a.a;a!==b.a;a=a.a)a.d=!1;for(a=b.a.a;a!==b.a;a=a.a)a.c&&!a.d&&(e=a.b,f=new oa(1,e,sa),h=void 0,this.o||(h=na(e),h.a>f.a&&(f=h),h=na(e.e),h.a>f.a&&(f=h),h=na(e.d.b),h.a>f.a&&(f=h),h=qa(e),h.a>f.a&&(f=h),h=qa(e.e),h.a>f.a&&(f=h),h=qa(e.d.b),h.a>f.a&&(f=h)),f.c(this,f.b,f.a));if(null!==this.m){b=-1;a=this.m;for(O(this,4);null!==a;a=a.e){e=a.b;do this.o&&
(f=J(e).c?0:1,b!==f&&(b=f,f=!!b,this.s?this.s(f,this.d):this.t&&this.t(f))),P(this,e.a.c),e=e.e;while(e!==a.b)}Q(this);this.m=null}}if(this.w){b=this.b;for(e=b.a.a;e!==b.a;e=a)if(a=e.a,!e.c){f=e.b;h=f.e;k=void 0;do k=h,h=k.e,k.c=null,null===J(k)&&(k.d===k?F(k.a,null):(k.a.d=k.d,H(k,K(k))),g=k.b,g.d===g?F(g.a,null):(g.a.d=g.d,H(g,K(g))),fa(k));while(k!==f);f=e.g;e=e.a;e.g=f;f.a=e}this.w(this.b);this.d=this.b=null;return}}this.b=this.d=null};
function $(a,b){if(a.e!==b)for(;a.e!==b;)if(a.e<b)switch(a.e){case 0:Y(a,100151);a.J(null);break;case 1:Y(a,100152),a.I()}else switch(a.e){case 2:Y(a,100154);a.K();break;case 1:Y(a,100153);var c=a;c.e=0;c.p=null;c.b=null}}function Ra(a,b,c){var d=a.p;null===d?(d=ea(a.b),E(d,d.b)):(L(d),d=d.e);d.a.c=c;d.a.f[0]=b[0];d.a.f[1]=b[1];d.a.f[2]=b[2];d.g=1;d.b.g=-1;a.p=d}function Qa(a){a.b=new Wa;for(var b=0;b<a.c;b++){var c=a.g[b];Ra(a,c.f,c.a)}a.c=0;a.z=!1}function O(a,b){a.q?a.q(b,a.d):a.r&&a.r(b)}
function P(a,b){a.x?a.x(b,a.d):a.y&&a.y(b)}function Q(a){a.u?a.u(a.d):a.v&&a.v()}function Y(a,b){a.F?a.F(b,a.d):a.G&&a.G(b)};function ha(a,b){this.a=a||this;this.g=b||this;this.e=this.b=null;this.c=this.d=!1};function N(){this.i=this;this.j=this.c=this.a=this.e=this.d=this.b=null;this.g=0}function J(a){return a.b.c}function z(a){return a.b.a}function K(a){return a.b.e};function Wa(){this.c=new ga;this.a=new ha;this.b=new N;this.d=new N;this.b.b=this.d;this.d.b=this.b};function ga(a,b){this.e=a||this;this.g=b||this;this.c=this.d=null;this.f=[0,0,0];this.a=this.b=0;this.i=null};function Xa(){this.a=null;this.b=0}function Ya(a,b){var c=Array(b),d=0;if(null!==a)for(;d<a.length;d++)c[d]=a[d];for(;d<b;d++)c[d]=new Xa;return c};function Za(){this.a=0}function $a(a,b){var c=Array(b),d=0;if(null!==a)for(;d<a.length;d++)c[d]=a[d];for(;d<b;d++)c[d]=new Za;return c};function Sa(){this.c=ab(null,32);this.d=null;this.a=0;this.e=32;this.i=!1;this.g=t;this.b=new bb(this.g)}function Ta(a){a.d=[];for(var b=0;b<a.a;b++)a.d[b]=b;a.d.sort(function(a,b){return function(e,f){return b(a[e],a[f])?1:-1}}(a.c,a.g));a.e=a.a;a.i=!0;cb(a.b)}
function Ka(a,b){if(a.i){var c=a.b,d=++c.b;2*d>c.e&&(c.e*=2,c.c=$a(c.c,c.e+1),c.a=Ya(c.a,c.e+1));var e;0===c.d?e=d:(e=c.d,c.d=c.a[e].b);c.c[d].a=e;c.a[e].b=d;c.a[e].a=b;c.i&&Ia(c,d);return e}c=a.a;++a.a>=a.e&&(a.e*=2,a.c=ab(a.c,a.e));a.c[c]=b;return-(c+1)}function ab(a,b){var c=Array(b),d=0;if(null!==a)for(;d<a.length;d++)c[d]=a[d];for(;d<b;d++)c[d]=null;return c}
function Ua(a){if(0===a.a)return db(a.b);var b=a.c[a.d[a.a-1]];if(0!==a.b.b&&a.g(Va(a.b),b))return db(a.b);do--a.a;while(0<a.a&&null===a.c[a.d[a.a-1]]);return b};function bb(a){this.c=$a(null,33);this.a=Ya(null,33);this.b=0;this.e=32;this.d=0;this.i=!1;this.g=a;this.c[1].a=1}function cb(a){for(var b=a.b;1<=b;--b)Ha(a,b);a.i=!0}function Va(a){return a.a[a.c[1].a].a}function db(a){var b=a.c,c=a.a,d=b[1].a,e=c[d].a;0<a.b&&(b[1].a=b[a.b].a,c[b[1].a].b=1,c[d].a=null,c[d].b=a.d,a.d=d,0<--a.b&&Ha(a,1));return e}
function Ha(a,b){for(var c=a.c,d=a.a,e=c[b].a;;){var f=b<<1;f<a.b&&a.g(d[c[f+1].a].a,d[c[f].a].a)&&++f;var g=c[f].a;if(f>a.b||a.g(d[e].a,d[g].a)){c[b].a=e;d[e].b=b;break}c[b].a=g;d[g].b=b;b=f}}function Ia(a,b){for(var c=a.c,d=a.a,e=c[b].a;;){var f=b>>1,g=c[f].a;if(0===f||a.g(d[g].a,d[e].a)){c[b].a=e;d[e].b=b;break}c[b].a=g;d[g].b=b;b=f}};function oa(a,b,c){this.a=a;this.b=b;this.c=c};function ya(){this.d=this.h=null;this.e=0;this.b=this.a=this.g=this.c=!1}function V(a){return a.d.c.b}function U(a){return a.d.a.b};this.libtess={GluTesselator:Z,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},
gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}};Z.prototype.gluDeleteTess=Z.prototype.M;
Z.prototype.gluTessProperty=Z.prototype.R;Z.prototype.gluGetTessProperty=Z.prototype.N;Z.prototype.gluTessNormal=Z.prototype.Q;Z.prototype.gluTessCallback=Z.prototype.O;Z.prototype.gluTessVertex=Z.prototype.S;Z.prototype.gluTessBeginPolygon=Z.prototype.J;Z.prototype.gluTessBeginContour=Z.prototype.I;Z.prototype.gluTessEndContour=Z.prototype.K;Z.prototype.gluTessEndPolygon=Z.prototype.P; if (typeof module !== 'undefined') { module.exports = this.libtess; }
